(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{106:function(e,t,c){},107:function(e,t,c){},108:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c.n(n),s=c(51),o=c.n(s),r=(c(58),c(13)),i=c(4),j=(c(59),c(52)),u=c.n(j),l=c(2),b=c.p+"static/media/icon-arrow.2eaaa5ee.svg",d=(c(88),c(1)),h=function(e){var t=e.socket,c=Object(n.useState)(),a=Object(i.a)(c,2),s=a[0],o=a[1],r=Object(n.useState)([]),j=Object(i.a)(r,2),u=j[0],l=j[1],h=Object(n.useState)(!1),m=Object(i.a)(h,2),O=m[0],f=m[1];return Object(n.useEffect)((function(){t.on("roomData",(function(e){var t=e.room,c=e.userList;o(t),l(c)}))}),[]),Object(d.jsxs)("div",{className:"userWindow",children:[Object(d.jsx)("h2",{className:"room",children:s}),Object(d.jsxs)("div",{className:"userList",children:[Object(d.jsx)("h3",{className:"listTitle",children:"Users"}),Object(d.jsx)("img",{className:"dropDown ".concat(O?"active":""),src:b,alt:"See Users",onClick:function(){return f(!O)}})]}),Object(d.jsx)("ul",{className:"users ".concat(O?"active":""),children:u.map((function(e){return Object(d.jsx)("li",{children:e.username},e.id)}))})]})},m=c(32),O=function(e){if(!navigator.geolocation)return alert("Geolocation is not supported by your browser.");navigator.geolocation.getCurrentPosition((function(t){e.emit("shareLocation",{latitude:t.coords.latitude,longitude:t.coords.longitude},(function(){return console.log("Location Shared.")}))}))},f=(c(90),function(e){var t=e.socket,c=Object(n.useState)(""),a=Object(i.a)(c,2),s=a[0],o=a[1];return Object(d.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault(),t.emit("sendMessage",s,(function(e){return console.log(e)})),void o("")},children:[Object(d.jsx)("input",{id:"msgInput",value:s,placeholder:"Message...",autoComplete:"off",onChange:function(e){return o(e.target.value)},required:!0}),Object(d.jsx)("button",{className:"btn send",type:"submit",children:"Send"}),Object(d.jsx)("button",{className:"btn location",type:"button",onClick:function(){return O(t)},children:"Share Location"})]})}),g=(c(91),function(e){var t=e.socket,c=Object(n.useState)([]),a=Object(i.a)(c,2),s=a[0],o=a[1],j=function(){var e=document.querySelector(".messageWindow"),t=e.lastElementChild,c=parseInt(getComputedStyle(t).marginBottom),n=t.offsetHeight+c,a=e.offsetHeight;e.scrollHeight-n<=e.scrollTop+a&&(e.scrollTop=e.scrollHeight)};return Object(n.useEffect)((function(){t.on("message",(function(e){o((function(t){return[].concat(Object(m.a)(t),[Object(r.a)(Object(r.a)({},e),{},{type:"text"})])})),j()})),t.on("locationMessage",(function(e){o((function(t){return[].concat(Object(m.a)(t),[Object(r.a)(Object(r.a)({},e),{},{type:"link"})])})),j()}))}),[]),Object(d.jsxs)("div",{className:"chat-main",children:[Object(d.jsx)("div",{className:"messageWindow",children:s.map((function(e,t){var c=e.msg,n=e.username,a=e.createdAt,s=e.type;return Object(d.jsxs)("div",{className:"message",children:[Object(d.jsxs)("div",{className:"message--header",children:[Object(d.jsx)("span",{className:"header--name",children:n}),Object(d.jsx)("span",{className:"header--meta",children:a})]}),"text"===s?Object(d.jsx)("p",{children:c}):Object(d.jsx)("a",{href:c,target:"blank",children:"My Current Location"})]},t)}))}),Object(d.jsx)(f,{socket:t})]})}),x=(c(92),c(93)),p=function(e){var t=e.location,c=e.socket,a=x.parse(t.search),s=a.username,o=a.room,r=a.mode;console.log(r);var i=Object(l.f)();return Object(n.useEffect)((function(){c.emit("join",{username:s,room:o},(function(e){e&&(alert(e),i.goBack())}))}),[]),Object(d.jsxs)("div",{className:"chatPage",children:[Object(d.jsx)(h,{socket:c}),Object(d.jsx)(g,{socket:c})]})},v=c(19),N=(c(106),c(107),function(e){var t=e.name,c=e.checked,n=e.change;return Object(d.jsxs)("div",{className:"toggle-switch",onClick:function(){return n(!c)},children:[Object(d.jsx)("input",{type:"checkbox",className:"toggle-switch-checkbox",name:t,checked:c,onChange:function(e){return n(e.target.checked)}}),Object(d.jsxs)("label",{className:"toggle-switch-label",htmlFor:t,children:[Object(d.jsx)("span",{className:"toggle-switch-inner"}),Object(d.jsx)("span",{className:"toggle-switch-switch"})]})]})}),k=function(e){var t=e.roomPassword,c=e.setRoomPass,a=Object(n.useState)(""),s=Object(i.a)(a,2),o=s[0],r=s[1],j=Object(n.useState)(""),u=Object(i.a)(j,2),l=u[0],b=u[1],h=Object(n.useState)(!1),m=Object(i.a)(h,2),O=m[0],f=m[1],g=Object(n.useState)("join"),x=Object(i.a)(g,2),p=(x[0],x[1]);return Object(n.useEffect)((function(){p(O?"create":"join")}),[O]),Object(d.jsx)("div",{className:"home",children:Object(d.jsxs)("div",{className:"main",children:[Object(d.jsxs)("div",{className:"main-header",children:[Object(d.jsx)("h1",{children:O?"Create":"Join"}),Object(d.jsx)(N,{name:"Type",checked:O,change:f})]}),Object(d.jsxs)("form",{className:"main-joiningForm",children:[Object(d.jsx)("label",{children:"username"}),Object(d.jsx)("input",{type:"text",placeholder:"username...",value:o,onChange:function(e){return r(e.target.value)},required:!0}),Object(d.jsx)("label",{children:"Room"}),Object(d.jsx)("input",{type:"text",placeholder:"Room...",value:l,onChange:function(e){return b(e.target.value)},requried:"true"}),Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{type:"text",placeholder:"Password...",value:t,onChange:function(e){return c(e.target.value)},requried:"true"}),Object(d.jsx)(v.b,{className:"btn join",to:{pathname:"/chatpage",search:"?mode=&username=&room="},children:O?"Create":"Join"})]})]})})},w=u()(),S=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),c=t[0],a=t[1];return Object(d.jsx)(v.a,{children:Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{path:"/chatpage",render:function(e){return Object(d.jsx)(p,Object(r.a)(Object(r.a)({},e),{},{socket:w}))}}),Object(d.jsx)(l.a,{path:"/",exact:!0,render:function(e){return Object(d.jsx)(k,Object(r.a)(Object(r.a)({},e),{},{roomPassword:c,setRoomPass:a}))}})]})})};o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(S,{})}),document.getElementById("root"))},58:function(e,t,c){},59:function(e,t,c){},88:function(e,t,c){},90:function(e,t,c){},91:function(e,t,c){},92:function(e,t,c){}},[[108,1,2]]]);
//# sourceMappingURL=main.f2a2940b.chunk.js.map