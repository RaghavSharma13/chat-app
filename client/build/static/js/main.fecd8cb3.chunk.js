(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{106:function(e,t,n){},107:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),o=n(51),s=n.n(o),r=(n(58),n(13)),i=(n(59),n(52)),u=n.n(i),j=n(2),l=n(12),b=(n(88),n(1)),d=function(e){var t=e.socket,n=Object(c.useState)(),a=Object(l.a)(n,2),o=a[0],s=a[1],r=Object(c.useState)([]),i=Object(l.a)(r,2),u=i[0],j=i[1];return Object(c.useEffect)((function(){t.on("roomData",(function(e){var t=e.room,n=e.userList;s(t),j(n)}))}),[]),Object(b.jsxs)("div",{className:"userWindow",children:[Object(b.jsx)("h2",{className:"room",children:o}),Object(b.jsx)("h3",{className:"listTitle",children:"Users"}),Object(b.jsx)("ul",{className:"users",children:u.map((function(e){return Object(b.jsx)("li",{children:e.username},e.id)}))})]})},m=n(32),h=function(e){if(!navigator.geolocation)return alert("Geolocation is not supported by your browser.");navigator.geolocation.getCurrentPosition((function(t){e.emit("shareLocation",{latitude:t.coords.latitude,longitude:t.coords.longitude},(function(){return console.log("Location Shared.")}))}))},O=(n(90),function(e){var t=e.socket,n=Object(c.useState)(""),a=Object(l.a)(n,2),o=a[0],s=a[1];return Object(b.jsxs)("form",{className:"form",onSubmit:function(e){return e.preventDefault(),t.emit("sendMessage",o,(function(e){return console.log(e)})),void s("")},children:[Object(b.jsx)("input",{id:"msgInput",value:o,placeholder:"Message...",autoComplete:"off",onChange:function(e){return s(e.target.value)},required:!0}),Object(b.jsx)("button",{className:"btn send",type:"submit",children:"Send"}),Object(b.jsx)("button",{className:"btn location",type:"button",onClick:function(){return h(t)},children:"Share Location"})]})}),f=(n(91),function(e){var t=e.socket,n=Object(c.useState)([]),a=Object(l.a)(n,2),o=a[0],s=a[1],i=function(){var e=document.querySelector(".messageWindow"),t=e.lastElementChild,n=parseInt(getComputedStyle(t).marginBottom),c=t.offsetHeight+n,a=e.offsetHeight;e.scrollHeight-c<=e.scrollTop+a&&(e.scrollTop=e.scrollHeight)};return Object(c.useEffect)((function(){t.on("message",(function(e){s((function(t){return[].concat(Object(m.a)(t),[Object(r.a)(Object(r.a)({},e),{},{type:"text"})])})),i()})),t.on("locationMessage",(function(e){s((function(t){return[].concat(Object(m.a)(t),[Object(r.a)(Object(r.a)({},e),{},{type:"link"})])})),i()}))}),[]),Object(b.jsxs)("div",{className:"chat-main",children:[Object(b.jsx)("div",{className:"messageWindow",children:o.map((function(e,t){var n=e.msg,c=e.username,a=e.createdAt,o=e.type;return Object(b.jsxs)("div",{className:"message",children:[Object(b.jsxs)("div",{className:"message--header",children:[Object(b.jsx)("span",{className:"header--name",children:c}),Object(b.jsx)("span",{className:"header--meta",children:a})]}),"text"===o?Object(b.jsx)("p",{children:n}):Object(b.jsx)("a",{href:n,target:"blank",children:"My Current Location"})]},t)}))}),Object(b.jsx)(O,{socket:t})]})}),p=(n(92),n(93)),x=function(e){var t=e.location,n=e.socket,a=p.parse(t.search),o=a.username,s=a.room,r=Object(j.f)();return Object(c.useEffect)((function(){n.emit("join",{username:o,room:s},(function(e){e&&(alert(e),r.goBack())}))}),[]),Object(b.jsxs)("div",{className:"chatPage",children:[Object(b.jsx)(d,{socket:n}),Object(b.jsx)(f,{socket:n})]})},g=n(19),v=(n(106),function(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),s=Object(l.a)(o,2),r=s[0],i=s[1];return Object(b.jsx)("div",{className:"home",children:Object(b.jsxs)("form",{className:"joiningForm",children:[Object(b.jsx)("h1",{children:"Join"}),Object(b.jsx)("label",{children:"username"}),Object(b.jsx)("input",{type:"text",placeholder:"username",value:n,onChange:function(e){return a(e.target.value)},required:!0}),Object(b.jsx)("label",{children:"Room"}),Object(b.jsx)("input",{type:"text",placeholder:"Room",value:r,onChange:function(e){return i(e.target.value)},requried:"true"}),Object(b.jsx)(g.b,{className:"btn join",to:{pathname:"/chatpage",search:"?username=".concat(n,"&room=").concat(r)},children:"Join"})]})})}),N=u()(),k=function(){return Object(b.jsx)(g.a,{children:Object(b.jsxs)(j.c,{children:[Object(b.jsx)(j.a,{path:"/chatpage",exact:!0,render:function(e){return Object(b.jsx)(x,Object(r.a)(Object(r.a)({},e),{},{socket:N}))}}),Object(b.jsx)(j.a,{path:"/",exact:!0,component:v})]})})};s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(k,{})}),document.getElementById("root"))},58:function(e,t,n){},59:function(e,t,n){},88:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.fecd8cb3.chunk.js.map