{"version":3,"sources":["assets/icon-arrow.svg","components/userWindow.js","utils/geolocation.js","components/form.js","components/messageWindow.js","components/chatPage.js","components/toggleSwitch.js","components/home.js","App.js","index.js"],"names":["UserWindow","socket","useState","room","setRoom","userList","setUserList","drop","setDrop","useEffect","on","className","src","dropdownIcon","alt","onClick","map","user","username","id","shareLocation","navigator","geolocation","alert","getCurrentPosition","position","emit","latitude","coords","longitude","console","log","Form","msg","setMsg","onSubmit","e","preventDefault","res","value","placeholder","autoComplete","onChange","target","required","type","MessageWindow","chat","setChat","autoscroll","$messageWindow","document","querySelector","$newMessage","lastElementChild","newMessageMargin","parseInt","getComputedStyle","marginBottom","newMessageHeight","offsetHeight","visibleHeight","scrollHeight","scrollTop","msgObj","prevState","index","createdAt","href","qs","require","ChatPage","location","parse","search","mode","history","useHistory","error","goBack","ToggleSwitch","name","checked","change","htmlFor","Home","roomPassword","setRoomPass","setUsername","setChecked","setMode","requried","to","pathname","io","App","setRoomPassword","path","render","props","exact","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f2a2940b.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/icon-arrow.2eaaa5ee.svg\";","import React, { useEffect, useState } from 'react';\r\nimport dropdownIcon from '../assets/icon-arrow.svg';\r\nimport '../styles/userWindow.css';\r\n\r\nconst UserWindow = ({socket}) => {\r\n    const [room,setRoom]=useState();\r\n    const [userList,setUserList]=useState([]);\r\n    const [drop,setDrop]=useState(false);\r\n    const renderUserList=()=>{\r\n        return userList.map((user)=>{\r\n            return <li key={user.id}>{user.username}</li>\r\n        })\r\n    }\r\n\r\n    useEffect(()=>{\r\n        socket.on('roomData',({room,userList})=>{\r\n            setRoom(room);\r\n            setUserList(userList);\r\n        })\r\n    },[])\r\n    return (\r\n        <div className=\"userWindow\">\r\n            <h2 className=\"room\">{room}</h2>\r\n            <div className=\"userList\">\r\n            <h3 className=\"listTitle\">Users</h3>\r\n            <img className={`dropDown ${drop?\"active\":\"\"}`} src={dropdownIcon} alt=\"See Users\" onClick={()=>setDrop(!drop)} />\r\n            </div>\r\n            <ul className={`users ${drop?\"active\":\"\"}`}>\r\n                {renderUserList()}\r\n            </ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserWindow\r\n","const shareLocation = (socket) => {\r\n  if (!navigator.geolocation)\r\n    return alert(\"Geolocation is not supported by your browser.\");\r\n  navigator.geolocation.getCurrentPosition((position) => {\r\n    socket.emit(\r\n      \"shareLocation\",\r\n      {\r\n        latitude: position.coords.latitude,\r\n        longitude: position.coords.longitude,\r\n      },\r\n      () => console.log(\"Location Shared.\")\r\n    );\r\n  });\r\n};\r\nexport default shareLocation;\r\n","import React, { useState } from \"react\";\r\nimport shareLocation from \"../utils/geolocation\";\r\nimport '../styles/form.css';\r\n\r\nconst Form = ({socket }) => {\r\n  const [msg, setMsg] = useState(\"\");\r\n\r\n  const msgSubmit = (event) => {\r\n    event.preventDefault();\r\n    socket.emit(\"sendMessage\", msg, (res) => console.log(res));\r\n    setMsg(\"\");\r\n  };\r\n\r\n  return (\r\n    <form className=\"form\" onSubmit={(e) => msgSubmit(e)}>\r\n      <input\r\n        id=\"msgInput\"\r\n        value={msg}\r\n        placeholder=\"Message...\"\r\n        autoComplete=\"off\"\r\n        onChange={(e) => setMsg(e.target.value)}\r\n        required={true}\r\n      />\r\n      <button className=\"btn send\" type=\"submit\">Send</button>\r\n      <button className=\"btn location\" type=\"button\" onClick={() => shareLocation(socket)}>Share Location</button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Form from \"./form\";\r\nimport \"../styles/messageWindow.css\";\r\n\r\nconst MessageWindow = ({ socket }) => {\r\n  const [chat, setChat] = useState([]);\r\n  const renderChat = () => {\r\n    return chat.map(({ msg, username, createdAt, type }, index) => {\r\n      return (\r\n        <div key={index} className=\"message\">\r\n          <div className=\"message--header\">\r\n            <span className=\"header--name\">{username}</span>\r\n            <span className=\"header--meta\">{createdAt}</span>\r\n          </div>\r\n          {type === \"text\" ? (\r\n            <p>{msg}</p>\r\n          ) : (\r\n            <a href={msg} target=\"blank\">\r\n              My Current Location\r\n            </a>\r\n          )}\r\n        </div>\r\n      );\r\n    });\r\n  };\r\n\r\n  const autoscroll = () => {\r\n    //getting the messageWindow\r\n    const $messageWindow = document.querySelector(\".messageWindow\");\r\n\r\n    //getting new Message Element\r\n    const $newMessage = $messageWindow.lastElementChild;\r\n\r\n    //height of last Message\r\n    const newMessageMargin = parseInt(\r\n      getComputedStyle($newMessage).marginBottom\r\n    );\r\n    const newMessageHeight = $newMessage.offsetHeight + newMessageMargin;\r\n\r\n    //visible height\r\n    const visibleHeight = $messageWindow.offsetHeight;\r\n\r\n    //messageWindow full height\r\n    const containerHeight = $messageWindow.scrollHeight;\r\n\r\n    //offset height from top\r\n    const scrollOffset = $messageWindow.scrollTop + visibleHeight;\r\n\r\n    if (containerHeight - newMessageHeight <= scrollOffset)\r\n      $messageWindow.scrollTop = $messageWindow.scrollHeight;\r\n  };\r\n\r\n  useEffect(() => {\r\n    socket.on(\"message\", (msgObj) => {\r\n      setChat((prevState) => [...prevState, { ...msgObj, type: \"text\" }]);\r\n      autoscroll();\r\n    });\r\n\r\n    socket.on(\"locationMessage\", (msgObj) => {\r\n      setChat((prevState) => [...prevState, { ...msgObj, type: \"link\" }]);\r\n      autoscroll();\r\n    });\r\n  }, []);\r\n  return (\r\n    <div className=\"chat-main\">\r\n      <div className=\"messageWindow\">{renderChat()}</div>\r\n      <Form socket={socket} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MessageWindow;\r\n","import React, { useEffect } from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\nimport UserWindow from './userWindow';\r\nimport MessageWindow from './messageWindow';\r\n\r\nimport '../styles/chatPage.css';\r\n\r\nconst qs=require('query-string');\r\n\r\n\r\nconst ChatPage = ({location,socket}) => {\r\n    const {username,room,mode}= qs.parse(location.search);\r\n    console.log(mode)\r\n    const history=useHistory();\r\n    useEffect(()=>{\r\n        socket.emit('join',{username,room},(error)=>{\r\n            if(error){\r\n                alert(error);\r\n                // history.push('/');\r\n                history.goBack();\r\n            }\r\n        });\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[])\r\n\r\n    return (\r\n        <div className=\"chatPage\">\r\n            <UserWindow socket={socket}/>\r\n            <MessageWindow socket={socket} />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ChatPage\r\n","import React from \"react\";\r\nimport \"../styles/toggleSwitch.css\";\r\n\r\nconst ToggleSwitch = ({ name, checked, change }) => {\r\n  return (\r\n    <div className=\"toggle-switch\" onClick={() => change(!checked)}>\r\n      <input\r\n        type=\"checkbox\"\r\n        className=\"toggle-switch-checkbox\"\r\n        name={name}\r\n        checked={checked}\r\n        onChange={(e) => change(e.target.checked)}\r\n      />\r\n      <label className=\"toggle-switch-label\" htmlFor={name}>\r\n        <span className=\"toggle-switch-inner\"></span>\r\n        <span className=\"toggle-switch-switch\"></span>\r\n      </label>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ToggleSwitch;\r\n","import React, { useEffect, useState } from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport '../styles/home.css';\r\nimport ToggleSwitch from './toggleSwitch';\r\n\r\nconst Home = ({roomPassword, setRoomPass}) => {\r\n    const [username,setUsername]=useState('');\r\n    const [room,setRoom]=useState('');\r\n    const [checked, setChecked]=useState(false);\r\n    const [mode,setMode]=useState('join');\r\n    useEffect(()=>{\r\n        setMode(checked?\"create\":\"join\");\r\n    },[checked])\r\n    return (\r\n        <div className=\"home\">\r\n            <div className=\"main\">\r\n                <div className=\"main-header\">\r\n                    <h1>{checked?\"Create\":\"Join\"}</h1>\r\n                    <ToggleSwitch name=\"Type\" checked={checked} change={setChecked} />\r\n                </div>\r\n                <form className=\"main-joiningForm\">\r\n                    <label>username</label>\r\n                    <input type=\"text\" placeholder=\"username...\" value={username} onChange={(e)=>setUsername(e.target.value)} required={true}/>\r\n                    <label>Room</label>\r\n                    <input type=\"text\" placeholder=\"Room...\" value={room} onChange={(e)=>setRoom(e.target.value)} requried=\"true\" />\r\n                    <label>Password</label>\r\n                    <input type=\"text\" placeholder=\"Password...\" value={roomPassword} onChange={(e)=>setRoomPass(e.target.value)} requried=\"true\" />\r\n                    <Link className=\"btn join\" to={{\r\n                        pathname:\"/chatpage\",\r\n                        search:`?mode=&username=&room=`\r\n                    }} >{checked?\"Create\":\"Join\"}</Link>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Home\r\n","import React, {useState} from 'react';\nimport \"./App.css\";\nimport io from \"socket.io-client\";\nimport ChatPage from \"./components/chatPage\";\nimport Home from \"./components/home\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\n\nconst socket = io();\nconst App = () => {\n  \n  const [roomPassword, setRoomPassword]=useState('');\n  return (\n    <Router>\n        <Switch>\n        <Route\n            path=\"/chatpage\"\n            render={props=><ChatPage {...props}  socket={socket} \n            />}\n        />\n        <Route path=\"/\" exact render={props=><Home {...props} roomPassword={roomPassword}\n            setRoomPass={setRoomPassword} />} />\n        </Switch>\n    </Router>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}